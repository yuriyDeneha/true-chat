!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/platform-browser"),require("rxjs")):"function"==typeof define&&define.amd?define("@ngx-meta/core",["exports","@angular/core","@angular/platform-browser","rxjs"],e):e((t["ngx-meta"]=t["ngx-meta"]||{},t["ngx-meta"].core={}),t.ng.core,t.ng.platformBrowser,t.rxjs)}(this,function(i,a,e,n){"use strict";var t;(t=i.PageTitlePositioning||(i.PageTitlePositioning={}))[t.AppendPageTitle=0]="AppendPageTitle",t[t.PrependPageTitle=10]="PrependPageTitle";var o=function p(){},s=function(){function t(t){void 0===t&&(t={pageTitlePositioning:i.PageTitlePositioning.PrependPageTitle,defaults:{}}),this.providedSettings=t}return Object.defineProperty(t.prototype,"settings",{get:function(){return this.providedSettings},enumerable:!0,configurable:!0}),t}(),r=function(){function t(t,e,i){this.loader=t,this.title=e,this.meta=i,this.settings=t.settings,this.isMetaTagSet={}}return t.prototype.setTitle=function(t,a){var o=this;void 0===a&&(a=!1),(t?this.callback(t):n.of("")).subscribe(function(e){var i="";e?!a&&o.settings.pageTitleSeparator&&o.settings.applicationName?o.callback(o.settings.applicationName).subscribe(function(t){i=t?o.getTitleWithPositioning(e,t):e,o.updateTitle(i)}):o.updateTitle(e):(o.settings.defaults&&o.settings.defaults.title?o.callback(o.settings.defaults.title):n.of("")).subscribe(function(e){!a&&o.settings.pageTitleSeparator&&o.settings.applicationName?o.callback(o.settings.applicationName).subscribe(function(t){i=t?o.getTitleWithPositioning(e,t):e,o.updateTitle(i)}):o.updateTitle(e)})})},t.prototype.setTag=function(e,t){var i=this;if("title"===e)throw new Error("Attempt to set "+e+' through "setTag": "title" is a reserved tag name. Please use `MetaService.setTitle` instead.');var a=t||(this.settings.defaults&&this.settings.defaults[e]?this.settings.defaults[e]:"");("og:locale"!==e&&"og:locale:alternate"!==e?this.callback(a):n.of(a)).subscribe(function(t){i.updateTag(e,t)})},t.prototype.update=function(t,a){var o=this;if(a){if(a.disabled)return void this.update(t);this.setTitle(a.title,a.override),Object.keys(a).forEach(function(t){var e=a[t];if("title"!==t&&"override"!==t){if("og:locale"===t)e=e.replace(/-/g,"_");else if("og:locale:alternate"===t){var i=a["og:locale"];return void o.updateLocales(i,a[t])}o.setTag(t,e)}})}else{var e=this.settings.defaults&&this.settings.defaults.title||this.settings.applicationName;this.setTitle(e,!0)}this.settings.defaults&&Object.keys(this.settings.defaults).forEach(function(t){var e=o.settings.defaults[t];if(!(a&&(t in o.isMetaTagSet||t in a)||"title"===t||"override"===t)){if("og:locale"===t)e=e.replace(/-/g,"_");else if("og:locale:alternate"===t){var i=a?a["og:locale"]:undefined;return void o.updateLocales(i,e)}o.setTag(t,e)}});var i=(""+(this.settings.applicationUrl?this.settings.applicationUrl:"/")+t).replace(/(https?:\/\/)|(\/)+/g,"$1$2").replace(/\/$/g,"");this.setTag("og:url",i||"/")},t.prototype.removeTag=function(t){this.meta.removeTag(t)},t.prototype.callback=function(t){if(this.settings.callback){var e=this.settings.callback(t);return(a=e)&&"function"==typeof a.subscribe?e:(i=e)&&"function"==typeof i.then?n.from(e):n.of(e)}var i,a;return n.of(t)},t.prototype.getTitleWithPositioning=function(t,e){switch(this.settings.pageTitlePositioning){case i.PageTitlePositioning.AppendPageTitle:return e+String(this.settings.pageTitleSeparator)+t;case i.PageTitlePositioning.PrependPageTitle:return t+String(this.settings.pageTitleSeparator)+e;default:throw new Error("Invalid pageTitlePositioning specified ["+this.settings.pageTitlePositioning+"]!")}},t.prototype.updateTitle=function(t){this.title.setTitle(t),this.meta.updateTag({property:"og:title",content:t})},t.prototype.updateLocales=function(t,e){var i=this,a=t||(this.settings.defaults?this.settings.defaults["og:locale"]:"");a&&this.settings.defaults&&(this.settings.defaults["og:locale"]=a.replace(/_/g,"-")),this.meta.getTags('property="og:locale:alternate"').forEach(function(t){i.meta.removeTagElement(t)}),a&&e&&e.split(",").forEach(function(t){a.replace(/-/g,"_")!==t.replace(/-/g,"_")&&i.meta.addTag({property:"og:locale:alternate",content:t.replace(/-/g,"_")})})},t.prototype.updateTag=function(t,e){if(0===t.lastIndexOf("og:",0)?this.meta.updateTag({property:t,content:"og:locale"===t?e.replace(/-/g,"_"):e}):this.meta.updateTag({name:t,content:e}),this.isMetaTagSet[t]=!0,"description"===t)this.meta.updateTag({property:"og:description",content:e});else if("author"===t)this.meta.updateTag({property:"og:author",content:e});else if("publisher"===t)this.meta.updateTag({property:"og:publisher",content:e});else if("og:locale"===t){var i=this.settings.defaults?this.settings.defaults["og:locale:alternate"]:"";this.updateLocales(e,i),this.isMetaTagSet["og:locale:alternate"]=!0}else if("og:locale:alternate"===t){var a=this.meta.getTag('property="og:locale"').content;this.updateLocales(a,e),this.isMetaTagSet["og:locale"]=!0}},t.decorators=[{type:a.Injectable}],t.ctorParameters=function(){return[{type:o},{type:e.Title},{type:e.Meta}]},t}(),l=function(){function t(t){this.meta=t}return t.prototype.canActivate=function(t,e){var i=e.url,a=t.hasOwnProperty("data")?t.data.meta:undefined;return this.meta.update(i,a),!0},t.prototype.canActivateChild=function(t,e){return this.canActivate(t,e)},t.decorators=[{type:a.Injectable}],t.ctorParameters=function(){return[{type:r}]},t}();function c(){return new s}var g=function(){function e(t){if(t)throw new Error("MetaModule already loaded; import in root module only.")}return e.forRoot=function(t){return void 0===t&&(t={provide:o,useFactory:c}),{ngModule:e,providers:[t,l,r]}},e.decorators=[{type:a.NgModule}],e.ctorParameters=function(){return[{type:e,decorators:[{type:a.Optional},{type:a.SkipSelf}]}]},e}();i.metaFactory=c,i.MetaModule=g,i.MetaGuard=l,i.MetaLoader=o,i.MetaStaticLoader=s,i.MetaService=r,Object.defineProperty(i,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-meta-core.umd.min.js.map