{"version":3,"file":"ngx-meta-core.umd.js.map","sources":["ng://@ngx-meta/core/src/models/page-title-positioning.ts","ng://@ngx-meta/core/src/meta.loader.ts","ng://@ngx-meta/core/src/util.ts","ng://@ngx-meta/core/src/meta.service.ts","ng://@ngx-meta/core/src/meta.guard.ts","ng://@ngx-meta/core/index.ts"],"sourcesContent":["export enum PageTitlePositioning {\r\n  /**\r\n   * append page title after application name\r\n   */\r\n  AppendPageTitle = 0,\r\n  /**\r\n   * prepend page title before application name\r\n   */\r\n  PrependPageTitle = 10\r\n}\r\n","import { MetaSettings } from './models/meta-settings';\r\nimport { PageTitlePositioning } from './models/page-title-positioning';\r\n\r\nexport abstract class MetaLoader {\r\n  abstract get settings(): MetaSettings;\r\n}\r\n\r\nexport class MetaStaticLoader implements MetaLoader {\r\n  get settings(): MetaSettings {\r\n    return this.providedSettings;\r\n  }\r\n\r\n  constructor(\r\n    private readonly providedSettings: MetaSettings = {\r\n      pageTitlePositioning: PageTitlePositioning.PrependPageTitle,\r\n      defaults: {}\r\n    }\r\n  ) {}\r\n}\r\n","import { Observable } from 'rxjs';\r\n\r\nexport const isPromise = (obj: any): obj is Promise<any> => !!obj && typeof obj.then === 'function';\r\n\r\nexport const isObservable = (obj: any | Observable<any>): obj is Observable<any> => !!obj && typeof obj.subscribe === 'function';\r\n","import { Injectable } from '@angular/core';\r\nimport { Meta, Title } from '@angular/platform-browser';\r\nimport { from as observableFrom, Observable, of as observableOf } from 'rxjs';\r\n\r\nimport { MetaLoader } from './meta.loader';\r\nimport { MetaSettings } from './models/meta-settings';\r\nimport { PageTitlePositioning } from './models/page-title-positioning';\r\nimport { isObservable, isPromise } from './util';\r\n\r\n@Injectable()\r\nexport class MetaService {\r\n  protected readonly settings: MetaSettings;\r\n  private readonly isMetaTagSet: any;\r\n\r\n  constructor(readonly loader: MetaLoader, private readonly title: Title, private readonly meta: Meta) {\r\n    this.settings = loader.settings;\r\n    this.isMetaTagSet = {};\r\n  }\r\n\r\n  setTitle(title: string, override = false): void {\r\n    const title$ = title ? this.callback(title) : observableOf('');\r\n\r\n    title$.subscribe((res: string) => {\r\n      let fullTitle = '';\r\n\r\n      if (!res) {\r\n        const defaultTitle$ =\r\n          this.settings.defaults && this.settings.defaults.title ? this.callback(this.settings.defaults.title) : observableOf('');\r\n\r\n        defaultTitle$.subscribe((defaultTitle: string) => {\r\n          if (!override && this.settings.pageTitleSeparator && this.settings.applicationName) {\r\n            this.callback(this.settings.applicationName).subscribe((applicationName: string) => {\r\n              fullTitle = applicationName ? this.getTitleWithPositioning(defaultTitle, applicationName) : defaultTitle;\r\n              this.updateTitle(fullTitle);\r\n            });\r\n          } else {\r\n            this.updateTitle(defaultTitle);\r\n          }\r\n        });\r\n      } else if (!override && this.settings.pageTitleSeparator && this.settings.applicationName) {\r\n        this.callback(this.settings.applicationName).subscribe((applicationName: string) => {\r\n          fullTitle = applicationName ? this.getTitleWithPositioning(res, applicationName) : res;\r\n          this.updateTitle(fullTitle);\r\n        });\r\n      } else {\r\n        this.updateTitle(res);\r\n      }\r\n    });\r\n  }\r\n\r\n  setTag(key: string, value: string): void {\r\n    if (key === 'title') {\r\n      throw new Error(\r\n        `Attempt to set ${key} through \"setTag\": \"title\" is a reserved tag name. ` + 'Please use `MetaService.setTitle` instead.'\r\n      );\r\n    }\r\n\r\n    const cur = value || (this.settings.defaults && this.settings.defaults[key] ? this.settings.defaults[key] : '');\r\n\r\n    const value$ = key !== 'og:locale' && key !== 'og:locale:alternate' ? this.callback(cur) : observableOf(cur);\r\n\r\n    value$.subscribe((res: string) => {\r\n      this.updateTag(key, res);\r\n    });\r\n  }\r\n\r\n  update(currentUrl: string, metaSettings?: any): void {\r\n    if (!metaSettings) {\r\n      const fallbackTitle = this.settings.defaults\r\n        ? this.settings.defaults.title || this.settings.applicationName\r\n        : this.settings.applicationName;\r\n\r\n      this.setTitle(fallbackTitle, true);\r\n    } else {\r\n      if (metaSettings.disabled) {\r\n        this.update(currentUrl);\r\n\r\n        return;\r\n      }\r\n\r\n      this.setTitle(metaSettings.title, metaSettings.override);\r\n\r\n      Object.keys(metaSettings).forEach(key => {\r\n        let value = metaSettings[key];\r\n\r\n        if (key === 'title' || key === 'override') {\r\n          return;\r\n        } else if (key === 'og:locale') {\r\n          value = value.replace(/-/g, '_');\r\n        } else if (key === 'og:locale:alternate') {\r\n          const currentLocale = metaSettings['og:locale'];\r\n          this.updateLocales(currentLocale, metaSettings[key]);\r\n\r\n          return;\r\n        }\r\n\r\n        this.setTag(key, value);\r\n      });\r\n    }\r\n\r\n    if (this.settings.defaults) {\r\n      Object.keys(this.settings.defaults).forEach(key => {\r\n        let value = this.settings.defaults[key];\r\n\r\n        if ((metaSettings && (key in this.isMetaTagSet || key in metaSettings)) || key === 'title' || key === 'override') {\r\n          return;\r\n        } else if (key === 'og:locale') {\r\n          value = value.replace(/-/g, '_');\r\n        } else if (key === 'og:locale:alternate') {\r\n          const currentLocale = metaSettings ? metaSettings['og:locale'] : undefined;\r\n          this.updateLocales(currentLocale, value);\r\n\r\n          return;\r\n        }\r\n\r\n        this.setTag(key, value);\r\n      });\r\n    }\r\n\r\n    const baseUrl = this.settings.applicationUrl ? this.settings.applicationUrl : '/';\r\n    const url = `${baseUrl}${currentUrl}`.replace(/(https?:\\/\\/)|(\\/)+/g, '$1$2').replace(/\\/$/g, '');\r\n\r\n    this.setTag('og:url', url ? url : '/');\r\n  }\r\n\r\n  removeTag(key: string): void {\r\n    this.meta.removeTag(key);\r\n  }\r\n\r\n  private callback(value: string): Observable<string> {\r\n    if (this.settings.callback) {\r\n      const value$ = this.settings.callback(value);\r\n\r\n      if (!isObservable(value$)) {\r\n        return isPromise(value$) ? observableFrom(value$) : observableOf(value$);\r\n      }\r\n\r\n      return value$;\r\n    }\r\n\r\n    return observableOf(value);\r\n  }\r\n\r\n  private getTitleWithPositioning(title: string, applicationName: string): string {\r\n    switch (this.settings.pageTitlePositioning) {\r\n      case PageTitlePositioning.AppendPageTitle:\r\n        return applicationName + String(this.settings.pageTitleSeparator) + title;\r\n      case PageTitlePositioning.PrependPageTitle:\r\n        return title + String(this.settings.pageTitleSeparator) + applicationName;\r\n      default:\r\n        throw new Error(`Invalid pageTitlePositioning specified [${this.settings.pageTitlePositioning}]!`);\r\n    }\r\n  }\r\n\r\n  private updateTitle(title: string): void {\r\n    this.title.setTitle(title);\r\n    this.meta.updateTag({\r\n      property: 'og:title',\r\n      content: title\r\n    });\r\n  }\r\n\r\n  private updateLocales(currentLocale: string, availableLocales: string): void {\r\n    const cur = currentLocale || (this.settings.defaults ? this.settings.defaults['og:locale'] : '');\r\n\r\n    if (cur && this.settings.defaults) {\r\n      this.settings.defaults['og:locale'] = cur.replace(/_/g, '-');\r\n    }\r\n\r\n    // TODO: set HTML lang attribute - https://github.com/ngx-meta/core/issues/32\r\n    // const html = this.document.querySelector('html');\r\n    // html.setAttribute('lang', cur);\r\n\r\n    const elements = this.meta.getTags('property=\"og:locale:alternate\"');\r\n\r\n    elements.forEach((element: any) => {\r\n      this.meta.removeTagElement(element);\r\n    });\r\n\r\n    if (cur && availableLocales) {\r\n      availableLocales.split(',').forEach((locale: string) => {\r\n        if (cur.replace(/-/g, '_') !== locale.replace(/-/g, '_')) {\r\n          this.meta.addTag({\r\n            property: 'og:locale:alternate',\r\n            content: locale.replace(/-/g, '_')\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  private updateTag(key: string, value: string): void {\r\n    if (key.lastIndexOf('og:', 0) === 0) {\r\n      this.meta.updateTag({\r\n        property: key,\r\n        content: key === 'og:locale' ? value.replace(/-/g, '_') : value\r\n      });\r\n    } else {\r\n      this.meta.updateTag({\r\n        name: key,\r\n        content: value\r\n      });\r\n    }\r\n\r\n    this.isMetaTagSet[key] = true;\r\n\r\n    if (key === 'description') {\r\n      this.meta.updateTag({\r\n        property: 'og:description',\r\n        content: value\r\n      });\r\n    } else if (key === 'author') {\r\n      this.meta.updateTag({\r\n        property: 'og:author',\r\n        content: value\r\n      });\r\n    } else if (key === 'publisher') {\r\n      this.meta.updateTag({\r\n        property: 'og:publisher',\r\n        content: value\r\n      });\r\n    } else if (key === 'og:locale') {\r\n      const availableLocales = this.settings.defaults ? this.settings.defaults['og:locale:alternate'] : '';\r\n\r\n      this.updateLocales(value, availableLocales);\r\n      this.isMetaTagSet['og:locale:alternate'] = true;\r\n    } else if (key === 'og:locale:alternate') {\r\n      const currentLocale = this.meta.getTag('property=\"og:locale\"').content;\r\n\r\n      this.updateLocales(currentLocale, value);\r\n      this.isMetaTagSet['og:locale'] = true;\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, CanActivate, CanActivateChild, RouterStateSnapshot } from '@angular/router';\r\n\r\nimport { MetaService } from './meta.service';\r\n\r\n@Injectable()\r\nexport class MetaGuard implements CanActivate, CanActivateChild {\r\n  constructor(private readonly meta: MetaService) {}\r\n\r\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): boolean {\r\n    const url = state.url;\r\n\r\n    const metaSettings = route.hasOwnProperty('data') ? route.data.meta : undefined;\r\n\r\n    this.meta.update(url, metaSettings);\r\n\r\n    return true;\r\n  }\r\n\r\n  canActivateChild(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): boolean {\r\n    return this.canActivate(route, state);\r\n  }\r\n}\r\n","import { ModuleWithProviders, NgModule, Optional, SkipSelf } from '@angular/core';\r\n\r\nimport { MetaGuard } from './src/meta.guard';\r\nimport { MetaLoader, MetaStaticLoader } from './src/meta.loader';\r\nimport { MetaService } from './src/meta.service';\r\n\r\nexport * from './src/models/meta-settings';\r\nexport * from './src/models/page-title-positioning';\r\nexport * from './src/meta.guard';\r\nexport * from './src/meta.loader';\r\nexport * from './src/meta.service';\r\n\r\n// for AoT compilation\r\n// tslint:disable-next-line\r\nexport function metaFactory(): MetaLoader {\r\n  return new MetaStaticLoader();\r\n}\r\n\r\n@NgModule()\r\nexport class MetaModule {\r\n  static forRoot(\r\n    configuredProvider: any = {\r\n      provide: MetaLoader,\r\n      useFactory: metaFactory\r\n    }\r\n  ): ModuleWithProviders {\r\n    return {\r\n      ngModule: MetaModule,\r\n      providers: [configuredProvider, MetaGuard, MetaService]\r\n    };\r\n  }\r\n\r\n  constructor(@Optional() @SkipSelf() parentModule?: MetaModule) {\r\n    if (parentModule) {\r\n      throw new Error('MetaModule already loaded; import in root module only.');\r\n    }\r\n  }\r\n}\r\n"],"names":["PageTitlePositioning","observableOf","observableFrom","Injectable","Title","Meta","NgModule","Optional","SkipSelf"],"mappings":"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"}
