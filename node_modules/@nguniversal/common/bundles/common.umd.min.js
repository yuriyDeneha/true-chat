!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("tslib"),require("@angular/common/http"),require("@angular/core"),require("@angular/platform-browser"),require("rxjs"),require("rxjs/operators"),require("@angular/common")):"function"==typeof define&&define.amd?define("@nguniversal/common",["exports","tslib","@angular/common/http","@angular/core","@angular/platform-browser","rxjs","rxjs/operators","@angular/common"],t):t((e.nguniversal=e.nguniversal||{},e.nguniversal.common={}),e.tslib,e.ng.common.http,e.ng.core,e.ng.platformBrowser,e.rxjs,e.rxjs.operators,e.ng.common)}(this,function(e,t,r,n,a,o,s,i){"use strict";var u=function(){function e(e,t){var r=this;this.transferState=t,this.isCacheActive=!0,e.isStable.pipe(s.filter(function(e){return e}),s.take(1)).toPromise().then(function(){r.isCacheActive=!1})}return e.prototype.invalidateCacheEntry=function(e){var t=this;Object.keys(this.transferState.store).forEach(function(r){return r.includes(e)?t.transferState.remove(a.makeStateKey(r)):null})},e.prototype.makeCacheKey=function(e,t,r){var n=r.keys().sort().map(function(e){return e+"="+r.get(e)}).join("&");return a.makeStateKey(("GET"===e?"G.":"H.")+t+"?"+n)},e.prototype.intercept=function(e,n){var a=this;if("GET"!==e.method&&"HEAD"!==e.method&&(this.isCacheActive=!1,this.invalidateCacheEntry(e.url)),!this.isCacheActive)return n.handle(e);var i=this.makeCacheKey(e.method,e.url,e.params);if(this.transferState.hasKey(i)){var u=this.transferState.get(i,{});return o.of(new r.HttpResponse({body:u.body,headers:new r.HttpHeaders(u.headers),status:u.status,statusText:u.statusText,url:u.url}))}return n.handle(e).pipe(s.tap(function(e){e instanceof r.HttpResponse&&a.transferState.set(i,{body:e.body,headers:function n(e){var r,n,a={};try{for(var o=t.__values(e.keys()),s=o.next();!s.done;s=o.next()){var i=s.value;a[i]=e.getAll(i)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}(e.headers),status:e.status,statusText:e.statusText,url:e.url})}))},t.__decorate([n.Injectable(),t.__metadata("design:paramtypes",[n.ApplicationRef,a.TransferState])],e)}(),c=function(){return t.__decorate([n.NgModule({imports:[a.BrowserTransferStateModule],providers:[u,{provide:r.HTTP_INTERCEPTORS,useExisting:u,multi:!0}]})],function e(){})}();
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
function l(e){return function(){return new Promise(function(t,r){var n=function(){e.removeEventListener("DOMContentLoaded",n),t()};"complete"===e.readyState||"interactive"===e.readyState?t():e.addEventListener("DOMContentLoaded",n)})}}var f=function(){return t.__decorate([n.NgModule({providers:[{provide:n.APP_INITIALIZER,multi:!0,useFactory:l,deps:[i.DOCUMENT]}]})],function e(){})}();
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */e.ɵnguniversal_modules_common_common_a=l,e.TransferHttpCacheModule=c,e.StateTransferInitializerModule=f,e.ɵTransferHttpCacheInterceptor=u,Object.defineProperty(e,"__esModule",{value:!0})});